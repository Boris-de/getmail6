<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
    <TITLE>getmail Frequently Asked Questions</TITLE>
    
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <META NAME="author" CONTENT="Charles Cazabon">
    
    
</HEAD>
<BODY>


    <H1><A NAME="faq">getmail Frequently Asked Questions (FAQ)</A></H1>
    These are the Frequently Asked Questions about getmail.  If your question is not 
    answered here or in the <A HREF="docs.html#docs">documentation</A>,
    please subscribe to the <A HREF="getmail.html#maillist">mailing list</A>.

    <H2><A NAME="faq-about" HREF="#faq">About this document</A></H2>
    The official location of this document is
    <A HREF="http://www.qcc.ca/~charlesc/software/getmail-2.0/docs.html">http://www.qcc.ca/~charlesc/software/getmail-2.0/docs.html</A>.
    For easy navigation, all headings in the HTML version of this document are 
    links to their parent heading.

    <H1><A NAME="toc" HREF="#faq">Table of Contents</A></H1>
    <OL>
        <LI>
            <A HREF="#about-getmail">About getmail</A>
        </LI>
        <LI>
            <A HREF="#error-messages">Error messages</A>
        </LI>
        <LI>
            <A HREF="#config">getmail configuration</A>
        </LI>
        <LI>
            <A HREF="#other-errors">Other errors</A>
        </LI>
        <LI>
            <A HREF="#how">How do I ...</A>
        </LI>
    </OL>

    <H2><A NAME="about-getmail" HREF="#faq">About getmail</A></H2>

    <H4><A NAME="about-getmail-what" HREF="#about-getmail">What is getmail?</A></H4>
    getmail is a POP3 mail retriever, with support for both ordinary
    and domain (or multidrop) POP3 mailboxes.  It is written in Python,
    and licensed under the <A HREF="COPYING">GNU General Public License version 2</A>.

    <H4><A NAME="about-getmail-why" HREF="#about-getmail">Why did you write getmail?  Why not just use fetchmail?</A></H4>
    I do not like some of the design choices which were made with fetchmail.
    getmail does things a little differently, and for my purposes, better.
    In addition, most people find getmail easier to configure and use than
    fetchmail.  Perhaps most importantly, getmail cannot lose retrieved mail,
    while fetchmail (in its default configuration) can.
    <BR><BR>
    In addition, all fetchmail versions released before 20 June 2001 contain a 
    buffer overflow, which can be remotely exploited (see 
    <A HREF="http://www.securityfocus.com/bid/2877">www.securityfocus.com/bid/2877</A>
    for details).  getmail is not vulnerable to buffer overflows, because
    buffers in Python are dynamically sized.<BR>
    <BR>
    <STRONG>Update June 2002</STRONG>:  And there's yet another remotely-exploitable security
    hole discovered in fetchmail; <A HREF="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2002-0146">versions prior to 5.9.10 (released in June 2002)
    are exploitable</A>.  Think this will be the last security problem in fetchmail?<BR>
    <BR>
    <STRONG>Another Update June 2002</STRONG>:  Reading fetchmail's UPDATES file, it appears that another
    security problem was fixed in 5.9.12, where a server could crash fetchmail on 64-bit
    platforms.  Also worrying is a mention that it includes a fix for &quot;password shrouding&quot;.<BR>
	<BR>
	<STRONG>Update September 2002</STRONG>:  Yet another remotely-exploitable security
	hole in fetchmail; <A HREF="http://security.e-matters.de/advisories/032002.html">this hole</A>
	lets an attacker run arbitrary code on the victim's computer.<BR>
	<BR>
	<STRONG>Update December 2002</STRONG>:  Yet another remotely-exploitable security
	hole in fetchmail; once again, a remote attacker can run arbitrary code on the machine
	running fetchmail in its default configuration.  See <A HREF="http://security.e-matters.de/advisories/052002.html">this advisory</A>
	for details.<BR>
	
	<H4><A NAME="about-getmail-support" HREF="#about-getmail">How can I get support for getmail?</A></H4>
    getmail is <A HREF="http://www.fsf.org/">Free Software</A>.  As such, it
    comes with no warranty.  However, I will do my best to support getmail on
    a voluntary basis through the <A HREF="getmail.html#maillist">getmail mailing list</A>.
    If you are using getmail in a commercial or other environment where problems
    cost money, consider contacting me privately for commercial support.<BR>
    <BR>
    If you have questions about getmail, the first step is to read the
    <A HREF="docs.html#docs">documentation</A>, and the remainder of the
    <A HREF="faq.html#faq">Frequently Asked Questions</A>.  If your question
    isn't answered there, search the getmail mailing list archives at
    <A HREF="http://marc.theaimsgroup.com/?l=getmail&amp;r=1&amp;w=2">http://marc.theaimsgroup.com/?l=getmail&amp;r=1&amp;w=2</A>.<BR>
    <BR>
    If you still haven't found an answer to your question,
    please subscribe to the <A HREF="getmail.html#maillist">mailing list</A>
    by sending a blank email to &lt;getmail-subscribe @ discworld.dnsalias.org&gt;.
    If you post your question there, I will see it.  As an additional bonus,
    your question may be answered by another member of the list.

    <H4><A NAME="about-getmail-bug" HREF="#about-getmail">I think I found a bug!  How do I report it?</A></H4>
    Ideally, you should join the <A HREF="getmail.html#maillist">mailing list</A>.
    Send your bug report there.  You should include the following information:
    <UL>
        <LI>getmail version</LI>
        <LI>Python version</LI>
        <LI>any error message which getmail displayed</LI>
        <LI>the output from running getmail with your normal options plus &quot;--dump&quot;</LI>
        <LI>
            if your problem is getmail not determining the proper local recipient, please include
            the output of running getmail with your normal options plus &quot;--trace&quot;, 
            showing the retrieval of <STRONG>one</STRONG> problematic message.
        </LI>
    </UL>
    If you absolutely cannot sign up for the mailing list, send the report to me directly.
    I may not be able to respond to all reports privately, but I will try to address
    any bugs I find out about this way.

    <H4><A NAME="about-getmail-newfields" HREF="#about-getmail">Does getmail rewrite mail headers when it retrieves mail?</A></H4>
    No -- rewriting message header fields is bad.  getmail will add a new 
    Received: header field and a new Delivered-To: header field, but does not 
    rewrite existing headers.  You can disable the creation of these header 
    fields.

    <H4><A NAME="about-getmail-recipients" HREF="#about-getmail">How does getmail decide what local recipients to deliver a message to?</A></H4>
	This is a two-step process.
	<OL>
		<LI>
			getmail first tries to find who the message was originally addressed 
			to using one of two methods:
			<UL>
				<LI>
					Envelope recipient address method.  If the MTA running on the
					POP3 servers is sensible, it will record the envelope recipient
					address in a new header field at the top of the message.  You
					can then tell getmail to find it using the
					<A HREF="docs.html#directive-envelope-recipient-header">envelope_recipient_header directive</A>.
					getmail will look only at the specific header field you specify.
					This is the most accurate method, but it is not the default,
					as many MTAs (including default configurations of sendmail) are
					too braindead to record the envelope recipient address.
				</LI>
				<LI>
					Other header field examination method.  getmail will attempt to 
					extract all valid email addresses from various message header fields 
					which are commonly used for indicating recipients. The default 
					headers that getmail examines for addresses when using this
					method are:
				    <UL>
				        <LI>Delivered-To</LI>
				        <LI>Envelope-To</LI>
				        <LI>Apparently-To</LI>
				        <LI>X-Envelope-To</LI>
				        <LI>Resent-To</LI>
				        <LI>Resent-cc</LI>
				        <LI>Resent-bcc</LI>
				        <LI>To</LI>
				        <LI>cc</LI>
				        <LI>bcc</LI>
				    </UL>
				    These can be changed with the
				    <A HREF="docs.html#directive-recipient-header">recipient_header directive</A>.
				</LI>
			</UL>
		</LI>
		<LI>
    		getmail will then compare each address found above to any configured 
    		local recipient address patterns.  Any of these that match get 
    		exactly one copy of the message, even if they match multiple 
    		addresses.  If none match, it is delivered to the default delivery 
    		instruction (postmaster directive).
    	</LI>
    </OL>
    <BR><BR>

    <H2><A NAME="error-messages" HREF="#faq">Error Messages</A></H2>

    <H4><A NAME="error-message-percent" HREF="#error-messages">getmail complains about &quot;<SAMP CLASS="error">incomplete format string</SAMP>&quot; ...</A></H4>
    Double any percent signs you have in your getmailrc file -- i.e., if your
    password is &quot;foo%bar&quot;, then actually specify it as
    &quot;foo%%bar&quot;.

    <H4><A NAME="error-message-empty-value" HREF="#error-messages">getmail complains about &quot;<SAMP CLASS="error">error in getmailrc file (expected option value, got ... )</SAMP>&quot;</A></H4>
    You have a syntax error in your getmailrc file.  Empty option values are not 
    allowed.  If you want to specify an empty string as an option value, you 
    have to quote it:<BR>
    <PRE CLASS="sample">foo = &quot;&quot;</PRE>

    <H4><A NAME="error-message-python-version" HREF="#error-messages">getmail complains about &quot;<SAMP CLASS="error">Error reading default getmailrc file</SAMP>&quot;, but 
    I've checked everything and it's fine.  What's wrong?</A></H4>
    What version of Python are you running?  Versions earlier than 1.5.2 can
    cause this problem.  Upgrade to Python 1.5.2 or later.

    <H4><A NAME="error-message-writable" HREF="#error-messages">getmail complains about &quot;<SAMP CLASS="error">configuration error in getmailrc file (/path/to/getmailrc):  file is group- or world-writable</SAMP>&quot;.
    What's wrong?</A></H4>
    Your getmailrc configuration file is group- or world-writable.  For security
    reasons, getmail refuses to run with a group- or world-writable getmailrc
    file.  Change the permissions on that file.

    <H4><A NAME="error-message-python-warning" HREF="#error-messages">When I start getmail, I get the error &quot;<SAMP CLASS="error">SyntaxWarning: name 
    'timeoutsocket' is assigned to before global declaration</SAMP>&quot;.  What's wrong?</A></H4>
    Nothing -- it's a warning, not an error.  This is a check for certain 
    possible problems by the Python interpreter in Python version 2.0 and above. 
    In this case, the test is wrong.  To skip the test, add &quot;<EM CLASS="sample">-W ignore</EM>&quot;
    to the invocation of Python.  Change the wrapper script included with 
    getmail to do this.  Thanks to Errol Casey for the tip on this.

    <H4><A NAME="error-message-host-not-found" HREF="#error-messages">My 'net connection is via PPP/SLIP/modem, and when it's down, my cron'd getmail throws an &quot;<SAMP CLASS="error">error: host not found</SAMP>&quot; exception.</A></H4>
    Upgrade to the latest version of getmail to solve this problem.

    
    <H2><A NAME="config" HREF="#faq">getmail configuration</A></H2>

    <H4><A NAME="config-domain" HREF="#config">What is a &quot;domain mailbox&quot;?</A></H4>
    A domain (or multidrop) mailbox is a POP3 mailbox which receives mail
    for all users in a given domain.  Normal mailboxes contain mail for
    a single user (like <EM CLASS="sample">jason@myisp.co.uk</EM>); some Internet
    Service Providers which provide webhosting or other services will
    provide a POP3 mailbox which receives mail for all addresses in
    a given domain (i.e. mail for <EM CLASS="sample">service@smallcompany.net</EM>,
    <EM CLASS="sample">sales@smallcompany.net</EM>, and indeed anything<EM CLASS="sample">@smallcompany.net</EM>
    ends up in the same POP3 mailbox).<BR>
    <BR>
    getmail provides a method of retrieving mail from a domain mailbox
    and distributing it among the various users automatically.  See the
    documentation sections on <A HREF="docs.html#directive-local">header field pattern matching delivery targets</A>,
    <A HREF="docs.html#directive-recipient-header">recipient header field specification</A>,
    <A HREF="docs.html#directive-postmaster">default delivery target</A>,
    and <A HREF="docs.html#account-types-domain">POP3 domain mailboxes</A>.

    <H4><A NAME="config-mta" HREF="#config">Do I have to run sendmail or another MTA to use getmail?</A></H4>
    No.  getmail delivers directly to Maildirs, mboxes, or via arbitrary
    MDAs, and never injects mail via SMTP, so no MTA is necessary.
    P.S.  If you're currently running sendmail, consider switching to
    <A HREF="http://www.qmail.org/">qmail</A> if you need a full MTA,
    or <A HREF="http://untroubled.org/nullmailer/">nullmailer</A> if
    you relay all your mail through your ISP's smarthost.  Both of them
    are better and more secure than sendmail.

    <H4><A NAME="config-simple" HREF="#config">I've got a simple POP3 account.  Do I need &quot;local=...&quot; configuration variables?</A></H4>
    No, you don't need them.  They might be useful to you if the MTA on the POP3 server
    supports extension addresses (i.e. <A HREF="http://www.qmail.org/">qmail</A>).
    But in general, you will only need to use a <A HREF="docs.html/#directive-postmaster">postmaster directive</A>.

        
    <H2><A NAME="other-errors" HREF="#faq">Other getmail errors</A></H2>

    <H4><A NAME="other-errors-maildir" HREF="#other-errors">I've configured getmail to deliver to my Maildir, but it won't do it.  Why?</A></H4>
    Double-check your getmailrc file.  Starting with version 2.0, Maildir specifications
    <STRONG>must</STRONG> include a trailing slash.  For example,
    <PRE CLASS="sample">postmaster = /home/adam/Maildir</PRE>
    is incorrect (getmail will think this is an mbox delivery target).  The 
    correct method is:
    <PRE CLASS="sample">postmaster = /home/adam/Maildir/</PRE>

    <H4><A NAME="other-errors-mbox" HREF="#other-errors">I've configured getmail to deliver to my mbox file, but it won't do it.  Why?</A></H4>
    The problem is one or more of the following:
    <UL>
        <LI>
            The user getmail is running as doesn't have write permission to the mbox file you specified.
        </LI>
        <LI>
            The path you specified is actually a symlink to the mbox file.  getmail refuses
            to deliver to an mbox if it is a symlink.  Specify the path to the actual file instead.
        </LI>
        <LI>
            The path you specified doesn't exist.  getmail won't create an mbox file.  `touch` the
            file first, to create a 0-byte file.
        </LI>
        <LI>
            The file does not appear to be an mbox file.  It has to either start with the
            five character string &quot;From &quot; or be a zero-length file.  The mboxrd specification
            demands this.
        </LI>
    </UL>

    <H4><A NAME="other-errors-command" HREF="#other-errors">I've configured getmail to deliver to a command (external MDA), but it complains that the command <SAMP CLASS="error">exited 0 but wrote to stderr</SAMP>.  Why?</A></H4>
    Command deliveries must exit 0 and not write anything to stderr to be considered a successful
    delivery.  If you know your MDA can write to stderr on success, give your
    command a <EM CLASS="sample">--quiet</EM> option (if it supports it) or
    discard or redirect stderr in the command specification of the delivery target.

    <H4><A NAME="other-errors-allmail" HREF="#other-errors">Why does getmail retrieve all my messages when I've told it to only retrieve new mail?</A></H4>
    Your POP3 mail server is probably broken.  getmail requires that the
    server support the POP3 UIDL command to uniquely identify messages.
    If the server doesn't support it, getmail cannot tell which messages
    it has already seen, and therefore retrieves all messages.

    <H4><A NAME="other-errors-double" HREF="#other-errors">getmail delivered two copies of the same message to one delivery target!</A></H4>
    No, it didn't.  What happened was that there were two almost-identical
    messages retrieved from the POP3 mailbox.  The target received one copy of
    each of the two messages.  This will happen if the mailbox is a domain mailbox,
    and the same address is specified in To: and cc: or bcc: recipients by the
    original message sender.  If you wish to suppress the duplicates, there
    are two methods:
    <UL>
        <LI>Have the POP3 server record the envelope recipient address in a
            header field (like qmail does with Delivered-To:), and then use
            <A HREF="docs.html#directive-local">local directives</A> and the
            <A HREF="docs.html#directive-recipient-header">recipient_header directive</A>
            to tell getmail to sort mail based on this information.
        </LI>
        <LI>
            Use the <A HREF="docs.html#directive-eliminate-duplicates">eliminate_duplicates</A>
            directive.
        </LI>
    </UL>


    <H2><A NAME="how" HREF="#faq">How do I ...</A></H2>

    <H4><A NAME="how-delivered-to" HREF="#how">How do I stop getmail adding a Delivered-To: header to email?</A></H4>
    Use the <A HREF="docs.html#directive-no-delivered-to">no_delivered_to configuration directive</A>.

    <H4><A NAME="how-received" HREF="#how">How do I stop getmail adding a Received: header to email?</A></H4>
    Use the <A HREF="docs.html#directive-no-received">no_received configuration directive</A>.

    <H4><A NAME="how-pipe" HREF="#how">How do I make getmail deliver messages to a program?</A></H4>
    As of version 2.1.0, getmail can deliver messages to a program (pipe
    delivery).  Specify the delivery target as &quot;|path-to-command&quot;.
    You should probably use full paths (e.g. &quot;/usr/bin/maildrop&quot;).
    As a basic security precaution, getmail will refuse to deliver to programs
    if it is running as root.<BR>
    <STRONG>Warning:  if you don't know what you're doing, you can shoot 
    yourself in the foot with this option.</STRONG>

    <H4><A NAME="how-smtp" HREF="#how">How do I make getmail deliver messages by re-injecting with SMTP?</A></H4>
    You don't.  getmail doesn't do this, to prevent lost mail, mail loops,
    and bounces if getmail or your Mail Transfer Agent is misconfigured.
    getmail has native support for delivering to qmail-style Maildirs and 
    mboxrd-format mbox files, as well as to commands (pipe delivery). Therefore 
    you shouldn't need to re-inject retrieved messages.  Note that advanced
    users might read <A HREF="#how-pipe">this</A> and get ideas.

    <H4><A NAME="how-daemon" HREF="#how">How do I run getmail in &quot;daemon&quot; mode?</A></H4>
    Use your system's cron utility to run getmail periodically if you wish
    to have mail retrieved automatically at intervals.  This is precisely what
    cron is designed to do; there's no need to add special code to getmail
    to do this.

    <H4><A NAME="how-tmda" HREF="#how">How do I use TMDA with getmail?</A></H4>
    <A HREF="http://tmda.sourceforge.net">TMDA</A> is the Tagged Message
    Delivery Agent, an excercise in preventing spam
    from ever reaching your inbox.<BR>
    <BR>
    To make getmail export the <A HREF="docs.html#directive-delivery-targets">environment variables</A>
    which TMDA needs, you
    must use <A HREF="docs.html#directive-local">local directives</A> in your
    getmailrc file.  You can then optionally set the 
    <A HREF="docs.html#directive-extension-sep">extension_sep</A> and
    <A HREF="docs.html#directive-extension-depth">extension_depth</A>
    directives.<BR>
    <BR>
    For example, if getmail determines the envelope recipient to be
    <EM CLASS="sample">domain-user-ext1-ext2@otherdomain.tld</EM>,
    <EM CLASS="sample">extension_sep</EM> is set to <EM CLASS="sample">-</EM>,
    and <EM CLASS="sample">extension_depth</EM> is set to <EM CLASS="sample">1</EM>,
    then getmail will set <EM CLASS="sample">EXT</EM> to <EM CLASS="sample">user-ext1-ext2</EM>.
    If <EM CLASS="sample">extension_depth</EM> is 2, it will instead set
    <EM CLASS="sample">EXT</EM> to <EM CLASS="sample">ext1-ext2</EM>.<BR>
    <BR>
    TMDA renames existing Delivered-To: header fields to Old-Delivered-To:.  Previous
    versions (0.55 through 0.57 or so) instead tried to strip recent Delivered-To:
    fields and may have required disabling getmail's addition of new Delivered-To:
    header fields.<BR>
    <BR>
    You will need a wrapper around TMDA to use in a 
    <A HREF="docs.html#delivery-targets">command delivery target</A>
    which conditionally delivers the message based on TMDA's exit code.
    getmail does not include such a wrapper; you will need to write it or find
    it yourself.<BR>
    <BR>
    Note that getmail will only be able to determine the envelope recipient 
    address (and extension part of that address) reliably if the MTA at the POP3 
    server is configured to record the envelope recipient in a message header 
    field (i.e. as qmail does with Delivered-To:), and you have configured 
    getmail to only look at that header field with the
    <A HREF="docs.html#directive-recipient-header">recipient_header</A> directive.<BR>
    <BR>
    If anyone has concrete experience using getmail and TMDA together, please 
    feel free to send instructions or your wrapper script to me; I personally do 
    not use a filtering MDA and therefore have no experience making TMDA work 
    with getmail.



</BODY>
</HTML>
